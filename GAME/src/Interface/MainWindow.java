/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Interface;

import Cards.Character;
import java.awt.Canvas;
import javax.swing.JFrame;
import Game.MenuCreationControl;

/**
 *
 * @author soldgear
 */
public class MainWindow extends JFrame {
    
    public static boolean running;
    
    private Character chr;
    private Character adv;
    private Battle Bt;
    
    private MenuCreationControl creationControl;
    
    /**
     * Creates new form MainWindow
     */
    public MainWindow() {
        running = false;
        creationControl = new MenuCreationControl();
        initComponents();
//        Bt = new Battle(this.chr, this.adv);
    }
    
    public MainWindow(Character chr, Character adv){
        creationControl = new MenuCreationControl();
        this.chr = chr;
        this.adv = adv;
        initComponents();
    }
    
    public void initDisplayComponents(){
        NameLabel.setText("Name: -");
        AttackLabel.setText("Attack: -");
        MagicLabel.setText("magic: -");
        HealthLabel.setText("HP: -");
        ExpLabel.setText("XP: -");
    }
    
    public void updateDisplayComponents(){
        
        NameLabel.setText("Name: "+chr.getName());
        AttackLabel.setText("Attack: "+chr.getAttackDamage());
        MagicLabel.setText("magic: "+chr.getMagicDamage());
        HealthLabel.setText("HP: "+chr.getHealthPoints());
        ExpLabel.setText("XP: "+chr.getExperience());
    }
    
    public void startBattle(){
        Bt = new Battle(this.chr, this.adv);
        Bt.setListener(new Battle.BattleListener() {
            @Override
            public void battleEnd() {
                updateDisplayComponents();
            }

            @Override
            public void roundEnd(Character chr, Character adv) {
                terminalEvents.setText(chr.getName() + ": " + chr.getHealthPoints() + ", " + adv.getName() + ": " + adv.getHealthPoints() + "\n" + terminalEvents.getText());
            }
        });
        Bt.start();
    }
    
    public void setCharacter(Character chr){
        this.chr = chr;
    }
    
    public void setAdversary(Character adv){
        this.adv = adv;
    }
    
    public void printTerminal(String print){
        terminalEvents.setText(print+"\n"+terminalEvents.getText());
    }
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTextField1 = new javax.swing.JTextField();
        mainPanel = new javax.swing.JPanel();
        interfacePanel = new javax.swing.JPanel();
        statsPanel = new javax.swing.JPanel();
        NameLabel = new javax.swing.JLabel();
        HealthLabel = new javax.swing.JLabel();
        AttackLabel = new javax.swing.JLabel();
        MagicLabel = new javax.swing.JLabel();
        ExpLabel = new javax.swing.JLabel();
        recentPanel = new javax.swing.JPanel();
        Sell = new javax.swing.JButton();
        Deck = new javax.swing.JButton();
        recStatsPanel = new javax.swing.JPanel();
        recentEquipName = new javax.swing.JLabel();
        deckPanel = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        terminalEvents = new javax.swing.JTextArea();
        startButton = new javax.swing.JButton();
        creationPanel = new javax.swing.JPanel();
        createButton = new javax.swing.JButton();
        nameCreationField = new javax.swing.JTextField();
        nameCreationLabel = new javax.swing.JLabel();
        MageCheckBox = new javax.swing.JCheckBox();
        WarriorCheckBox = new javax.swing.JCheckBox();

        jTextField1.setText("jTextField1");

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(200, 200, 200));
        setForeground(java.awt.Color.gray);

        interfacePanel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        statsPanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        NameLabel.setText("name");

        HealthLabel.setText("HP");

        AttackLabel.setText("Atk");

        MagicLabel.setText("Magic");

        ExpLabel.setText("XP");

        javax.swing.GroupLayout statsPanelLayout = new javax.swing.GroupLayout(statsPanel);
        statsPanel.setLayout(statsPanelLayout);
        statsPanelLayout.setHorizontalGroup(
            statsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(statsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(statsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(AttackLabel)
                    .addComponent(MagicLabel)
                    .addComponent(ExpLabel)
                    .addComponent(NameLabel)
                    .addComponent(HealthLabel))
                .addContainerGap(101, Short.MAX_VALUE))
        );
        statsPanelLayout.setVerticalGroup(
            statsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(statsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(NameLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(HealthLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(AttackLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(MagicLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ExpLabel)
                .addContainerGap(22, Short.MAX_VALUE))
        );

        recentPanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        Sell.setText("Sell");

        Deck.setText("Deck");

        recStatsPanel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        recentEquipName.setText("EQUIP_NAME");

        javax.swing.GroupLayout recStatsPanelLayout = new javax.swing.GroupLayout(recStatsPanel);
        recStatsPanel.setLayout(recStatsPanelLayout);
        recStatsPanelLayout.setHorizontalGroup(
            recStatsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(recStatsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(recentEquipName, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        recStatsPanelLayout.setVerticalGroup(
            recStatsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, recStatsPanelLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(recentEquipName, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(23, 23, 23))
        );

        javax.swing.GroupLayout recentPanelLayout = new javax.swing.GroupLayout(recentPanel);
        recentPanel.setLayout(recentPanelLayout);
        recentPanelLayout.setHorizontalGroup(
            recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(recentPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(recStatsPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(recentPanelLayout.createSequentialGroup()
                        .addComponent(Sell)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(Deck)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        recentPanelLayout.setVerticalGroup(
            recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, recentPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(recStatsPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(Sell)
                    .addComponent(Deck))
                .addGap(12, 12, 12))
        );

        deckPanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        javax.swing.GroupLayout deckPanelLayout = new javax.swing.GroupLayout(deckPanel);
        deckPanel.setLayout(deckPanelLayout);
        deckPanelLayout.setHorizontalGroup(
            deckPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 308, Short.MAX_VALUE)
        );
        deckPanelLayout.setVerticalGroup(
            deckPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout interfacePanelLayout = new javax.swing.GroupLayout(interfacePanel);
        interfacePanel.setLayout(interfacePanelLayout);
        interfacePanelLayout.setHorizontalGroup(
            interfacePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(interfacePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(statsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(recentPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(deckPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        interfacePanelLayout.setVerticalGroup(
            interfacePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(interfacePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(interfacePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(statsPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(recentPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(deckPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );

        terminalEvents.setColumns(20);
        terminalEvents.setRows(5);
        jScrollPane1.setViewportView(terminalEvents);

        startButton.setText("START");
        startButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                startButtonActionPerformed(evt);
            }
        });

        creationPanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        createButton.setText("CREATE");
        createButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                createButtonActionPerformed(evt);
            }
        });

        nameCreationLabel.setText("Name:");

        MageCheckBox.setText("Mage");
        MageCheckBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                MageCheckBoxActionPerformed(evt);
            }
        });

        WarriorCheckBox.setText("Warrior");
        WarriorCheckBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                WarriorCheckBoxActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout creationPanelLayout = new javax.swing.GroupLayout(creationPanel);
        creationPanel.setLayout(creationPanelLayout);
        creationPanelLayout.setHorizontalGroup(
            creationPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(creationPanelLayout.createSequentialGroup()
                .addGap(58, 58, 58)
                .addComponent(createButton)
                .addContainerGap(14, Short.MAX_VALUE))
            .addGroup(creationPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(nameCreationLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(creationPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(nameCreationField)
                    .addGroup(creationPanelLayout.createSequentialGroup()
                        .addGroup(creationPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(WarriorCheckBox)
                            .addComponent(MageCheckBox))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        creationPanelLayout.setVerticalGroup(
            creationPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, creationPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(creationPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(nameCreationField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(nameCreationLabel))
                .addGap(15, 15, 15)
                .addComponent(WarriorCheckBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(MageCheckBox)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(createButton)
                .addContainerGap())
        );

        javax.swing.GroupLayout mainPanelLayout = new javax.swing.GroupLayout(mainPanel);
        mainPanel.setLayout(mainPanelLayout);
        mainPanelLayout.setHorizontalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(interfacePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addComponent(creationPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainPanelLayout.createSequentialGroup()
                                .addComponent(startButton, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(69, 69, 69))
                            .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 392, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap())
        );
        mainPanelLayout.setVerticalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 134, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 38, Short.MAX_VALUE)
                        .addComponent(startButton)
                        .addGap(29, 29, 29))
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addComponent(creationPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)))
                .addComponent(interfacePanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(mainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(mainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void startButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_startButtonActionPerformed
        
        if (running == false){
            running = true;
            if(this.chr == null){
                printTerminal("No character selected. Please, set your character!");
            }else{
                startBattle();
            }
        }else{
            printTerminal("Already running!");
        }
    }//GEN-LAST:event_startButtonActionPerformed

    private void MageCheckBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_MageCheckBoxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_MageCheckBoxActionPerformed

    private void WarriorCheckBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_WarriorCheckBoxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_WarriorCheckBoxActionPerformed

    private void createButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_createButtonActionPerformed
        // TODO add your handling code here:
        
        if (nameCreationField.getText().equals("")){
            printTerminal("Please, select the CHARACTER NAME");
            return;
        }
        
        if (WarriorCheckBox.isSelected() && MageCheckBox.isSelected()){
            terminalEvents.setText("Please, select ONLY one of the options avaible\n"+terminalEvents.getText());
            return;
        }
        
        if (WarriorCheckBox.isSelected() == false && MageCheckBox.isSelected() == false){
            terminalEvents.setText("Please, select AT LEAST one of the options avaible\n"+terminalEvents.getText());
            return;
        }
        
        if(WarriorCheckBox.isSelected()){
            this.chr = creationControl.CreateWarrior(nameCreationField.getText());
        }
        
        if(MageCheckBox.isSelected()){
            this.chr = creationControl.CreateMage(nameCreationField.getText());
        }
        printTerminal("Character Created!");
        updateDisplayComponents();
    }//GEN-LAST:event_createButtonActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel AttackLabel;
    private javax.swing.JButton Deck;
    private javax.swing.JLabel ExpLabel;
    private javax.swing.JLabel HealthLabel;
    private javax.swing.JCheckBox MageCheckBox;
    private javax.swing.JLabel MagicLabel;
    private javax.swing.JLabel NameLabel;
    private javax.swing.JButton Sell;
    private javax.swing.JCheckBox WarriorCheckBox;
    private javax.swing.JButton createButton;
    private javax.swing.JPanel creationPanel;
    private javax.swing.JPanel deckPanel;
    private javax.swing.JPanel interfacePanel;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JTextField nameCreationField;
    private javax.swing.JLabel nameCreationLabel;
    private javax.swing.JPanel recStatsPanel;
    private javax.swing.JLabel recentEquipName;
    private javax.swing.JPanel recentPanel;
    private javax.swing.JButton startButton;
    private javax.swing.JPanel statsPanel;
    private javax.swing.JTextArea terminalEvents;
    // End of variables declaration//GEN-END:variables
}
