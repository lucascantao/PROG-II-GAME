/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Interface;

import Cards.Character;
import java.awt.Canvas;
import java.awt.Color;
import javax.swing.JFrame;

/**
 *
 * @author soldgear
 */
public class MainWindow extends JFrame {
    
    public static boolean running;
    
    private Character chr;
    private Character adv;
    private Battle Bt;
    
    private CreationWindow creationWindow;
    
    /**
     * Creates new form MainWindow
     */
    public MainWindow() {
        creationWindow = new CreationWindow(this);
        running = false;
        initComponents();
//        Bt = new Battle(this.chr, this.adv);
    }
    
    public MainWindow(Character chr, Character adv){
        creationWindow = new CreationWindow(this);
        this.chr = chr;
        this.adv = adv;
        initComponents();
    }
    
    public void initDisplayComponents(){
        NameLabel.setText("Name: -");
        NameLabel.setForeground(Color.white);
        AttackLabel.setText("Attack: -");
        AttackLabel.setForeground(Color.yellow);
        MagicLabel.setText("magic: -");
        MagicLabel.setForeground(Color.blue);
        HealthLabel.setText("HP: -");
        HealthLabel.setForeground(Color.green);
        ExpLabel.setText("XP: -");
        ExpLabel.setForeground(new Color(180,180,180));
        
        interfacePanel.setBackground(new Color(50,50,50));
        
        mainPanel.setBackground(new Color(40,40,40));
        
        recStatsPanel.setBackground(new Color(100,100,100));
        
        statsPanel.setBackground(new Color(60,60,60));
        deckPanel.setBackground(new Color(60,60,60));
        recentPanel.setBackground(new Color(60,60,60));
        
        
    }
    
    public void updateDisplayComponents(){
        
        NameLabel.setText("Name: "+chr.getName());
        AttackLabel.setText("Attack: "+chr.getAttackDamage());
        MagicLabel.setText("magic: "+chr.getMagicDamage());
        HealthLabel.setText("HP: "+chr.getHealthPoints());
        ExpLabel.setText("XP: "+chr.getExperience());
    }
    
    public void startBattle(){
        Bt = new Battle(this.chr, this.adv);
        Bt.setListener(new Battle.BattleListener() {
            @Override
            public void battleEnd() {
                updateDisplayComponents();
            }

            @Override
            public void roundEnd(Character chr, Character adv) {
                terminalEvents.setText(chr.getName() + ": " + chr.getHealthPoints() + ", " + adv.getName() + ": " + adv.getHealthPoints() + "\n" + terminalEvents.getText());
            }
        });
        Bt.start();
    }
    
    public void setCharacter(Character chr){
        this.chr = chr;
        updateDisplayComponents();
    }
    
    public void setAdversary(Character adv){
        this.adv = adv;
    }
    
    public void printTerminal(String print){
        terminalEvents.setText(print+"\n"+terminalEvents.getText());
    }
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTextField1 = new javax.swing.JTextField();
        mainPanel = new javax.swing.JPanel();
        interfacePanel = new javax.swing.JPanel();
        statsPanel = new javax.swing.JPanel();
        NameLabel = new javax.swing.JLabel();
        HealthLabel = new javax.swing.JLabel();
        AttackLabel = new javax.swing.JLabel();
        MagicLabel = new javax.swing.JLabel();
        ExpLabel = new javax.swing.JLabel();
        recentPanel = new javax.swing.JPanel();
        Sell = new javax.swing.JButton();
        Deck = new javax.swing.JButton();
        recStatsPanel = new javax.swing.JPanel();
        recentEquipName = new javax.swing.JLabel();
        deckPanel = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        terminalEvents = new javax.swing.JTextArea();
        startButton = new javax.swing.JButton();
        createCharacterButton = new javax.swing.JButton();

        jTextField1.setText("jTextField1");

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(200, 200, 200));
        setForeground(java.awt.Color.gray);

        interfacePanel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        statsPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Character Stats", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 0, 11), new java.awt.Color(180, 180, 180))); // NOI18N
        statsPanel.setForeground(new java.awt.Color(180, 180, 180));

        NameLabel.setText("name");

        HealthLabel.setText("HP");

        AttackLabel.setText("Atk");

        MagicLabel.setText("Magic");

        ExpLabel.setText("XP");

        javax.swing.GroupLayout statsPanelLayout = new javax.swing.GroupLayout(statsPanel);
        statsPanel.setLayout(statsPanelLayout);
        statsPanelLayout.setHorizontalGroup(
            statsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(statsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(statsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(AttackLabel)
                    .addComponent(MagicLabel)
                    .addComponent(ExpLabel)
                    .addComponent(NameLabel)
                    .addComponent(HealthLabel))
                .addContainerGap(101, Short.MAX_VALUE))
        );
        statsPanelLayout.setVerticalGroup(
            statsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(statsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(NameLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(HealthLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(AttackLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(MagicLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ExpLabel)
                .addContainerGap(22, Short.MAX_VALUE))
        );

        recentPanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        Sell.setText("Sell");

        Deck.setText("Deck");

        recStatsPanel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        recentEquipName.setText("EQUIP_NAME");

        javax.swing.GroupLayout recStatsPanelLayout = new javax.swing.GroupLayout(recStatsPanel);
        recStatsPanel.setLayout(recStatsPanelLayout);
        recStatsPanelLayout.setHorizontalGroup(
            recStatsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(recStatsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(recentEquipName, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        recStatsPanelLayout.setVerticalGroup(
            recStatsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, recStatsPanelLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(recentEquipName, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(23, 23, 23))
        );

        javax.swing.GroupLayout recentPanelLayout = new javax.swing.GroupLayout(recentPanel);
        recentPanel.setLayout(recentPanelLayout);
        recentPanelLayout.setHorizontalGroup(
            recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(recentPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(recStatsPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(recentPanelLayout.createSequentialGroup()
                        .addComponent(Sell)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(Deck)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        recentPanelLayout.setVerticalGroup(
            recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, recentPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(recStatsPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(recentPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(Sell)
                    .addComponent(Deck))
                .addGap(12, 12, 12))
        );

        deckPanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        javax.swing.GroupLayout deckPanelLayout = new javax.swing.GroupLayout(deckPanel);
        deckPanel.setLayout(deckPanelLayout);
        deckPanelLayout.setHorizontalGroup(
            deckPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );
        deckPanelLayout.setVerticalGroup(
            deckPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout interfacePanelLayout = new javax.swing.GroupLayout(interfacePanel);
        interfacePanel.setLayout(interfacePanelLayout);
        interfacePanelLayout.setHorizontalGroup(
            interfacePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(interfacePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(statsPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(recentPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(deckPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        interfacePanelLayout.setVerticalGroup(
            interfacePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(interfacePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(interfacePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(statsPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(recentPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(deckPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );

        terminalEvents.setColumns(20);
        terminalEvents.setRows(5);
        jScrollPane1.setViewportView(terminalEvents);

        startButton.setText("START");
        startButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                startButtonActionPerformed(evt);
            }
        });

        createCharacterButton.setText("CREATE");
        createCharacterButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                createCharacterButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout mainPanelLayout = new javax.swing.GroupLayout(mainPanel);
        mainPanel.setLayout(mainPanelLayout);
        mainPanelLayout.setHorizontalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainPanelLayout.createSequentialGroup()
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(interfacePanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addGap(73, 73, 73)
                        .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(createCharacterButton, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(startButton, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 392, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        mainPanelLayout.setVerticalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 134, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(mainPanelLayout.createSequentialGroup()
                        .addGap(40, 40, 40)
                        .addComponent(startButton)
                        .addGap(18, 18, 18)
                        .addComponent(createCharacterButton)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 72, Short.MAX_VALUE)
                .addComponent(interfacePanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(mainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(mainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void startButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_startButtonActionPerformed
        
        if (running == false){
            running = true;
            if(this.chr == null){
                printTerminal("No character selected. Please, set your character!");
            }else{
                startBattle();
            }
        }else{
            printTerminal("Already running!");
        }
    }//GEN-LAST:event_startButtonActionPerformed

    private void createCharacterButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_createCharacterButtonActionPerformed
        creationWindow.setVisible(true);
    }//GEN-LAST:event_createCharacterButtonActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel AttackLabel;
    private javax.swing.JButton Deck;
    private javax.swing.JLabel ExpLabel;
    private javax.swing.JLabel HealthLabel;
    private javax.swing.JLabel MagicLabel;
    private javax.swing.JLabel NameLabel;
    private javax.swing.JButton Sell;
    private javax.swing.JButton createCharacterButton;
    private javax.swing.JPanel deckPanel;
    private javax.swing.JPanel interfacePanel;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JPanel recStatsPanel;
    private javax.swing.JLabel recentEquipName;
    private javax.swing.JPanel recentPanel;
    private javax.swing.JButton startButton;
    private javax.swing.JPanel statsPanel;
    private javax.swing.JTextArea terminalEvents;
    // End of variables declaration//GEN-END:variables
}
